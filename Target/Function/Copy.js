var b=async(f={})=>{const{Asset:c=[],Copy:d=!1,Glob:m={},Verbose:w=!1,Once:y=!1,Resolve:s="Out",Dry:n=!1}=f,o=n===!0||w,p=(await import("./Format.js")).default(c),h=d?"onStart":"onEnd";return{name:"@playform/copy",setup(i){i[h](async()=>{if(y&&process.env[u]==="true"){await a(`Copy plugin skipped as option ${e.white("Once")} set to true`,o);return}if(!p.length)return;let r;if(s==="Current")r=process.cwd();else if(s==="Out"){const t=i.initialOptions.outdir??(await import("path")).dirname(i.initialOptions.outfile);if(!t){await a(e.red(`You should provide valid ${e.white("outdir")} or ${e.white("outfile")} for assets copy. received outdir:${i.initialOptions.outdir}, received outfile:${i.initialOptions.outfile}`),o);return}r=t}else r=s;await a(`Resolve assert pair to path from: ${(await import("path")).resolve(r)}`,o);for(const{from:t,to:g}of p){const l=[...new Set(await(await import("fast-glob")).default(t,{onlyFiles:!0,...m}))];l.length||await a(`No files matched using current glob pattern: ${e.white(t)}, maybe you need to configure fast-glob by ${e.white("options.Glob")}?`,o);for(const O of l)g.forEach(v=>{$(r,t,O,v,o,n)});process.env[u]="true"}})}}};const u="esbuild_copy_executed",{default:e}=await import("chalk"),{default:a}=await import("./Log.js"),{default:$}=await import("./Handle.js");export{e as Chalk,$ as Handle,a as Log,u as PLUGIN_EXECUTED_FLAG,b as default};
